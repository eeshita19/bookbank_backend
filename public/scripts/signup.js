// signup
const signupForm = document.querySelector('#signup-form');
signupForm.addEventListener('submit', (e) => {
    e.preventDefault();

    // get user info
    const email = signupForm['signup-email'].value;
    const password = signupForm['signup-password'].value;

    if (email.length < 4) {
        alert('Please enter an email address.');
        return;
    }
    if (password.length < 4) {
        alert('Please enter a password.');
        return;
    }

    // sign up the user & add firestore data
    auth.createUserWithEmailAndPassword(email, password)
        .then(() => {
            sendEmailVerification();
            signupForm.reset();
            signupForm.querySelector('.error').innerHTML = ''
        }).catch(err => {
            signupForm.querySelector('.error').innerHTML = err.message;
        });

});

function sendEmailVerification() {
    // [START sendemailverification]
    firebase.auth().currentUser.sendEmailVerification().then(function () {
        // Email Verification sent!
        // [START_EXCLUDE]
        alert('Email Verification Sent!');
        // [END_EXCLUDE]
    });
    // [END sendemailverification]
}